@page "/add-goal"
@using BeProductive.Modules.Goals.Presentation.Models

@{
    Layout.Title = "";
}

<GoalForm Type="GoalForm.GoalFormType.New" Value="@_model" OnFinished="@OnFinish"/>

@code {

    private GoalModel _model = new();

    private async Task OnFinish()
    {
        var goal = _model.ApplyToGoal(new());
        await GoalService.AddGoal(goal);

        NotificationService.Success("Task added successfully!");

        NavigationManager.NavigateTo(GoalListPage.GetUrlWithSelectedGoal(goal));
    }

}