@page "/rituals"
@page "/rituals/{ActiveTab}"

@{
    Layout.Title = "Rituals";
}

<Tabs Animated ActiveKey="@ActiveTab" ActiveKeyChanged="@OnTabChanged">
    <TabPane Tab="Morning ritual" Key="morning">
        <RitualsTab Type="@RitualType.Morning"/>
    </TabPane>
    <TabPane Tab="Evening ritual" Key="evening">
        <RitualsTab Type="@RitualType.Evening"/>
    </TabPane>
</Tabs>

@code {

    [Parameter]
    public string ActiveTab { get; set; } = "morning";

    protected override void OnInitialized()
    {
        if (string.IsNullOrEmpty(ActiveTab))
        {
            NavigationManager.NavigateTo(GetUrlForType(RitualType.Morning), replace: true);
        }
    }
    
    private void OnTabChanged(string key)
    {
        NavigationManager.NavigateTo(GetUrlForType(key), replace: true);
    }

}

@code {

    public static string GetUrlForType(RitualType type)
    {
        return $"/rituals/{type.ToString().ToLower()}";
    }
    
    public static string GetUrlForType(string type)
    {
        return $"/rituals/{type.ToString().ToLower()}";
    }

}