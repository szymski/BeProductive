@inherits LayoutComponentBase
@implements IDisposable
 
<Layout Style="min-height: 100%">
    <Sidebar/>

    <Layout Style="margin-left: 200px">
        <ContextPageHeader/>

        <Content Style="padding: 1rem">
            @{
                RenderFragment? body;
            }
            <ErrorBoundary @ref="_errorBoundary">
                <ChildContent>
                    @Body
                </ChildContent>
                <ErrorContent Context="error">
                    <ErrorDisplay Exception="@error"/>
                    @Body
                </ErrorContent>
            </ErrorBoundary>
        </Content>

        <Footer Style="background: white; text-align: right">
            <Text Disabled>Copyright Szymon Jankowski © @(DateTime.Today.Year) </Text>
        </Footer>
    </Layout>
</Layout>

@code {

    private ErrorBoundary _errorBoundary;

    protected override void OnInitialized()
    {
        NavigationManager.LocationChanged += OnLocationChanged;
        
        NotificationService.Config(new()
        {
            Placement = NotificationPlacement.BottomLeft,
        });
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        _errorBoundary.Recover();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }

}